/**********************************************************************************************************************
 *  HEADER FILES INCLUSION
 *********************************************************************************************************************/

#include "STD_TYPES.h"
#include "SysTick.h"
#include "SysTick_Cfg.h"

/**********************************************************************************************************************
 *  GLOBAL POINTER TO Function
 *********************************************************************************************************************/
 
static void (*ptrToSysTick_ISR)(void);

/**********************************************************************************************************************
 *  Functions Definitions
 *********************************************************************************************************************/
 
void SysTick_Init(void)
{
	STCTRL_R->INTEN    = 1;
	
	STCTRL_R->CLK_SRC  = 1;
}

void SysTick_Timer_Start_CB(u16 Time_Delay,void (*SysTick_CB)(void))
{
	ptrToSysTick_ISR = SysTick_CB;
	STRELOAD_R = (u32)(((Time_Delay/1000.0) * CLOCK_FREQ_hz)-1) ;
	STCTRL_R->ENABLE   = 1;	
	
}


/**********************************************************************************************************************
 *  ISR HANDLER
 *********************************************************************************************************************/
 
void SysTick_Handler(void)
{
	(*ptrToSysTick_ISR)();
}
